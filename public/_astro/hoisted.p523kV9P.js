import{i as m,d as g,f as E,g as b,h as f,j as u,k as c,l as p}from"./hoisted.RG0r74SF.js";import{m as l,l as a,s as O,c as T,r as L,M as h}from"./alertas.c_6jZo2R.js";function y(o,r){if(r==="telefono")return A(o);if(r==="correo")return D(o)}function A(o){return/^[0-9]+$/gm.test(o)}function D(o){return/^\w+([.-_+]?\w+)*@\w+([.-]?\w+)*(\.\w{2,10})+$/.test(o)}document.addEventListener("DOMContentLoaded",function(){const o=document.createElement("DIV"),r={nombre:!1,telefono:!1,correo:!1,mensaje:!1};j(),C();function j(){o.setAttribute("id","error-tel-correo"),m.parentElement.appendChild(o)}function C(){g.addEventListener("blur",s),E.addEventListener("blur",s),m.addEventListener("blur",s),b.addEventListener("blur",s),f.addEventListener("submit",x)}async function x(e){if(e.preventDefault(),!d())return;u.disabled=!0,O(f);const n={nombre:g.value,telefono:E.value,correo:m.value,mensaje:b.value};try{const i=await T(n);L(),a("error",c,"alerta-error-form"),l("sucess",p,["Mensaje enviado correctamente"],"alerta-exito"),setTimeout(()=>{a("sucess",p,"alerta-exito")},3e3),M()}catch(i){if(L(),i instanceof h){const v=JSON.parse(i.message);l("error",c,v,"alerta-error-form")}else l("error",c,["Error"],"alerta-error-form");t()}}function s(e){const n=e.target.value.trim();if(n===""&&(r[e.target.name]=!1,t()),e.target.name==="nombre"||e.target.name==="mensaje"){if(n===""){l("error",e.target.parentElement,[`El ${e.target.name} es obligatorio`],"alerta-error-form");return}r[e.target.name]=!0,a("error",e.target.parentElement,"alerta-error-form"),t();return}if(e.target.name==="telefono"||e.target.name==="correo"){if(n===""){a("error",e.target.parentElement,"alerta-error-form"),t(),w(e.target.name)?a("error",o,"alerta-error-form"):l("error",o,["Teléfono o email requerido"],"alerta-error-form");return}if(a("error",o,"alerta-error-form"),!y(n,e.target.name)){l("error",e.target.parentElement,e.target.name==="telefono"?["Obligatorio formato numérico"]:["El email no es válido"],"alerta-error-form"),r[e.target.name]="error",t();return}r[e.target.name]=!0,a("error",e.target.parentElement,"alerta-error-form"),t()}}function d(){return r.nombre&&r.telefono!=="error"&&r.correo!=="error"&&(r.telefono||r.correo)&&r.mensaje}function w(e){return e==="telefono"&&(r.correo==="error"||r.correo)?!0:e==="correo"&&(r.telefono==="error"||r.telefono)}function t(){if(!d()){u.disabled=!0;return}u.disabled=!1}function M(){r.nombre=!1,r.telefono=!1,r.correo=!1,r.mensaje=!1,f.reset(),t()}});
